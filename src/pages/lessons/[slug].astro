---
import PageLayout from "../../layouts/PageLayout.astro";
import { getCollection, render } from "astro:content";

// 1. Generate a new path for every collection entry
export async function getStaticPaths() {
  const lessons = await getCollection("lessons");
  return lessons
    .filter((lesson) => lesson.data.published)
    .map((lesson) => ({
      params: { slug: lesson.id },
      props: { lesson },
    }));
}

// 2. For your template, you can get the entry directly from the prop
const { lesson } = Astro.props;
const { Content } = await render(lesson);
---

<PageLayout title={lesson.data.title}>
  <article class="prose dark:prose-invert p-4">
    <h1>{lesson.data.title}</h1>
    <p>{lesson.data.description}</p>
    <Content />
  </article>
</PageLayout>
